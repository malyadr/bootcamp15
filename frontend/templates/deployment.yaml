
---
apiVersion: apps/v1
kind: Deployment
metadata:
    name: {{ .Release.Name }}-dep
    labels: 
      role: frontend
      env: demo 
spec:
  replicas: {{ .Values.replicaCount }}
  selector:
    matchLabels:
         role: frontend
  template:
      metadata: 
        labels:
          role: frontend
      spec:
        containers:
        -  name: frontend
           image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
           ports:
             - containerPort: 3000

# ---

# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: database
#   labels:
#     role: pg
#     env: demo
# spec:
#   replicas: {{ .Values.replicaCount }}
#   selector:
#     matchLabels:
#       role: pg
#   template:
#     metadata:
#       labels:
#         role: pg
#     spec:
#       containers:
#        - name: pg
#          image: "{{ .Values.image2.repository }}:{{ .Values.image2.tag }}"
#          env:
#            - name: POSTGRES_USER
#              value: {{ .Values.secert1.POSTGRES_USER }}
#            - name: POSTGRES_PASSWORD
#              value: {{ .Values.secert1.POSTGRES_PASSWORD }} 
#            - name: POSTGRES_DB
#              value: {{ .Values.secert1.POSTGRES_DB }}                     
#          ports:
#           - containerPort: 5432  

# ---

# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: springback
#   labels:
#     role: back
#     env: demo
# spec:
#   replicas: {{ .Values.replicaCount }}
#   selector:
#     matchLabels:
#       role: back
#   template:
#     metadata:
#       labels:
#         role: back
#     spec:
#       containers:
#       -  name: back
#          image: {{ .Values.image }}
#          env:  
#           - name: SPRING_DATASOURCE_URL
#             value: {{ .Values.secert2.jobs_url }}
#           - name: SPRING_DATASOURCE_USERNAME
#             value: {{ .Values.secert2.jobs_user }} 
#           - name: SPRING_DATASOURCE_PASSWORD
#             value: {{ .Values.secert2.jobs_passwd }}
#           - name: SPRING_JPA_HIBERNATE_DDL_AUTO
#             value: {{ .Values.secert2.jobs_update }}                
#          ports:
#           -  containerPort: 8080        